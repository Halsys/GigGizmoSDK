!function(e,t){for(var i in t)e[i]=t[i]}(this,function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=37)}([function(e,t,i){e.exports=i(38)()},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i(2),r=i(11);class n{constructor(e){if(this.expiration=(new Date).getTime()+36e5,this.changes=new Object,this.document=new Object,this.document=new Object,this.changes=new Object,"string"==typeof e)try{const t=JSON.parse(e);null!==t&&void 0!==t.ModelName&&delete t.ModelName,Object.assign(this.document,t)}catch(t){console.log(e),console.error(t)}else e&&("object"==typeof e.document&&e.document&&Object.assign(this.document,e.document),"object"==typeof e.changes&&e.changes?Object.assign(this.changes,e.changes):Object.assign(this.document,e))}get ModelName(){return this.document.ModelName||this.ModelName}get dateCreated(){const e=this.document.dateCreated||null;return e?new Date(e):new Date}get dateModified(){const e=this.getField("dateModified");return e?new Date(e):new Date}set dateModified(e){this.changes.dateModified=e?e.toJSON():null}get id(){return this.getField("_id")}set id(e){this.setField("_id",e)}get _id(){return this.getField("_id")}set _id(e){this.setField("_id",e)}static CacheGet(e){if("string"==typeof e&&n.Cache.has(e)){const t=n.Cache.get(e);if(t&&new Date(t.expiration)<new Date)return t}return null}static CacheSet(e){return e._id&&n.isValidId(e._id)?(n.Cache.set(e._id,e),e):e}static CacheRemove(e){n.Cache.delete(e)}static async deduceModelAndName(e){if(null===e)throw new Error("Model Name or Model Missing");let t=null,i=null;if("string"==typeof e)t=await Object(r.a)(e),i=e;else{if("function"!=typeof e)throw new Error(`Invalid first agument, expected string or function, got ${e}`);t=e,i=n.getModelName(e)}if("string"!=typeof i)throw new Error(`Missing model name from ${t}`);if("function"!=typeof t)throw new Error(`Model name (${i}) did not map to constructor`);return{Model:t,modelName:i}}static isValidId(e){const t=RegExp("^([0-9a-fA-F]{24}|[0-9a-fA-F]{12})$","g");return"string"==typeof e&&t.test(e)}static getModelName(e){return e&&e.ModelName?e.ModelName:e.constructor&&e.constructor.ModelName?e.constructor.ModelName:""}static async findByIdBase(e,t,i){if(n.isValidId(t)){const r=n.CacheGet(t);if(r)return r;{let r=null;const{Model:a,modelName:o}=await n.deduceModelAndName(e);if(s.a.useSocketIO&&s.a.ShouldUseSocketIO&&i&&(r=await new Promise((e,i)=>s.a.getSocket().then(i=>{i&&i.emit(`/API/${o}/Retreive`,t,e)},i))),r||(r=await s.a.call("GET",`/API/${o}/${t}`,null)),r&&n.isValidId(r._id))return r=new a(r),n.Cache.set(r._id,r),r}}return null}static async findOneBase(e,t={},i){if(null===t&&(t={}),1===Array.from(Object.keys(t)).length&&"string"==typeof t._id){const e=t._id,i=n.CacheGet(e);if(i)return i}let r=null;const{Model:a,modelName:o}=await n.deduceModelAndName(e),d=`/API/${o}/FindOne`;if(s.a.useSocketIO&&s.a.ShouldUseSocketIO&&i){const e=await s.a.getSocket();e&&(r=await new Promise((i,s)=>{try{e.emit(d,t,i)}catch(e){s(e)}}))}return r||(r=await s.a.call("GET",d,t)),r&&n.isValidId(r._id)?(r=new a(r),n.CacheSet(r),r):null}static async findManyBase(e,t={},i){if(null===t&&(t={}),1===Array.from(Object.keys(t)).length&&Array.isArray(t._id||t.id)){const e=[];if((t._id||t.id).forEach(t=>{const i=n.CacheGet(t);i&&e.push(i)}),e.length===(t._id||t.id))return e}let r=null;const{Model:a,modelName:o}=await n.deduceModelAndName(e),d=`/API/${o}/FindMany`;return s.a.useSocketIO&&s.a.ShouldUseSocketIO&&i&&(r=await new Promise((e,i)=>s.a.getSocket().then(i=>{i&&i.emit(d,t,e)},i))),t=t||{},r||(r=await s.a.call("GET",d,t)),Array.isArray(r)?r.map(e=>{const t=new a(e);return n.CacheSet(t),t}):[]}setField(e,t){this.getField(e)!==t&&(this.changes[e]=t,this.dateModified=new Date)}getField(e){return this.changes[e]||this.document[e]}toObject(){const e=this.isValid()?{...this.changes,...this.document}:null;return"object"==typeof e&&e&&(void 0!==e.id&&delete e.id,void 0!==e._id&&(e._id=e._id.toString()?e._id:null)),e}toString(){const e=this.toObject();return JSON.stringify(e)}anyErrors(){return this.document.id&&!n.isValidId(this.document.id)?new Error(`Invalid id: ${this.document.id}`):this.document.dateModified&&isNaN(Date.parse(this.document.dateModified))?new Error(`Invalid dateModified: ${this.document.dateModified}`):this.document.dateCreated&&isNaN(Date.parse(this.document.dateCreated))?new Error(`Invalid dateCreated: ${this.document.dateCreated}`):this.changes.id&&!n.isValidId(this.changes.id)?new Error(`Invalid id: ${this.document.id}`):this.changes.dateModified&&isNaN(Date.parse(this.changes.dateModified))?new Error(`Invalid dateModified: ${this.changes.dateModified}`):this.changes.dateCreated&&isNaN(Date.parse(this.changes.dateCreated))?new Error(`Invalid dateCreated: ${this.changes.dateCreated}`):null}isValid(){try{const e=this.anyErrors();if(e)throw e}catch(e){return!1}return!0}assign(e={}){return Object.assign(this.changes,e),this}async save(e){const t=this.constructor.ModelName;let i=null;const r=this.document._id||null,a=this.changes;if(Object.keys(this.changes).forEach(e=>{a[e]===this.document[e]&&delete a[e]}),a.id=this.changes._id||this.document._id||null,(i=s.a.useSocketIO&&s.a.ShouldUseSocketIO&&e?n.isValidId(r)?await new Promise((e,i)=>s.a.getSocket().then(i=>{i&&i.emit(`/API/${t}/Update`,a,e)},i)):await new Promise((e,i)=>s.a.getSocket().then(i=>{i&&i.emit(`/API/${t}/Create`,a,e)},i)):n.isValidId(r)?await s.a.call("PUT",`/API/${t}/${r}`,a):await s.a.call("POST",`/API/${t}/`,a))&&i._id)return this.document=i,this.changes={},n.CacheSet(this),this;throw new Error(`returned ${i}`)}async remove(e){const t=this._id||"";if(n.isValidId(t)){const i=this.constructor.ModelName;return s.a.useSocketIO&&s.a.ShouldUseSocketIO&&e?await new Promise((e,r)=>s.a.getSocket().then(s=>{s&&s.emit(`/API/${i}/Delete`,t,t=>e(t))},r)):await s.a.call("DELETE",`/API/${i}/${t}`,null),n.CacheRemove(t),this}throw new Error(`Invalid id: ${t}`)}}n.ModelName="RESTModel",n.Cache=new Map},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var s=i(35),r=i.n(s),n=i(19),a=i(36),o=i.n(a),d=i(11);class l{constructor(){throw new Error("Cannot instantiate.")}static get expires(){if(!l._expires&&l._token){let e=null;l.LocalStorageSupported&&(e=localStorage.getItem("expires")),l._expires=e?new Date(e):new Date}return l._expires}static set expires(e){l._expires=e,null===e&&l.LocalStorageSupported?localStorage.removeItem("expires"):l.LocalStorageSupported&&l._expires&&localStorage.setItem("expires",l._expires.toISOString())}static get token(){const e=new Date;if(l.expires&&e>l.expires)return l._token=null,l.LocalStorageSupported&&localStorage.removeItem("token"),null;if(!l._token&&l.LocalStorageSupported){const e=localStorage.getItem("token");e&&""!==e&&(l._token=JSON.parse(e))}return!l._token&&"undefined"!=typeof document&&document.cookie&&(l._token=Object(n.parse)(document.cookie)["gig-gizmo-token"]),l._token&&l.LocalStorageSupported&&localStorage.setItem("token",JSON.stringify(l._token)),l._token}static set token(e){if("string"==typeof e&&124!==e.length&&null!==e)throw new Error(`Token is not valid: ${e}`);"string"==typeof e&&0!==e.length?(l.LocalStorageSupported&&localStorage.setItem("token",JSON.stringify(e)),l._token=e):(l.LocalStorageSupported&&localStorage.removeItem("token"),l._token=null),"undefined"!=typeof document&&(document.cookie=Object(n.serialize)("gig-gizmo-token",l._token||"",{path:"/",sameSite:"strict"}))}static get rootURL(){let e="";return l.secure?e+="https://":e+="http://",e+=`${l.hostname}`,80===l.port||l.secure?443!==l.securePort&&l.secure&&(e+=`:${l.securePort}`):e+=`:${l.port}`,e}static get webSocketRootURL(){let e="";return l.secure?e+="wss://":e+="ws://",e+=`${l.hostname}`,80===l.port||l.secure?443!==l.securePort&&l.secure&&(e+=`:${l.securePort}`):e+=`:${l.port}`,e}static async deserializeData(e){try{if("object"==typeof e&&e&&"string"==typeof e._id&&"string"==typeof e.ModelName)return new(await Object(d.a)(e.ModelName))(e)}catch(e){console.error(e)}try{if(Array.isArray(e)&&e.length>0&&e.every(e=>Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&"object"==typeof e[1]&&e[1]&&"string"==typeof e[1]._id&&"string"==typeof e[1].ModelName)){const t=new Map,i=e.map(async e=>{const[i,s]=e;let r=null;"object"==typeof s&&s&&(r=await l.deserializeData(s)),t.set(i,r)});return await Promise.all(i),t}}catch(e){console.error(e)}try{if(Array.isArray(e)&&e.length>0&&e.every(e=>"object"==typeof e&&e&&"string"==typeof e._id&&"string"==typeof e.ModelName))return Promise.all(e.map(e=>l.deserializeData(e)))}catch(e){console.error(e)}try{if("object"==typeof e&&e&&!Array.isArray(e)){const t={},i=[];return Object.entries(e).forEach(([e,i])=>{"object"==typeof i&&i?l.deserializeData(i).then(i=>{t[e]=i}):t[e]=i}),await Promise.all(i),t}}catch(e){console.error(e)}return e}static async call(e,t,i){const s={data:null,headers:{"x-gig-gizmo-token":l.token?l._token:null},method:e.toLowerCase(),params:null,responseType:"json",url:`${l.rootURL}${t}`,xsrfCookieName:"gig-gizmo-token",xsrfHeaderName:"x-gig-gizmo-token"};if(i&&("HEAD"===e||"GET"===e?s.params=i:s.data=i),!l.Axios)throw new Error("Set Axios in GigGizmo API.");try{const e=await l.Axios(s);if(e.data)return e.data;if(e.statusText)return e.statusText;if(e.status)return null}catch(e){return console.error(e),null}}static async getSocket(){const e=e=>{e&&console.error(e),l.webSocket&&l.webSocket.open()},t=()=>(!l.webSocket&&l.SocketIO&&(l.webSocket=l.SocketIO(),l.webSocket.on("connect_timeout",e),l.webSocket.on("connect_error",e),l.webSocket.on("disconnect",e),l.webSocket.on("error",e),l.webSocket.open()),l.webSocket);if(l.SocketIO){if("undefined"==typeof document)return t();switch(document.readyState){case"loading":return await new Promise(e=>{document.addEventListener("DOMContentLoaded",e)}),t();case"interactive":case"complete":return t();default:throw new Error(`Unexpected readyState: ${document.readyState}`)}}return null}}l.SocketIO=o.a,l.Axios=r.a,l.SessionStorageSupported="undefined"!=typeof Storage,l.LocalStorageSupported="undefined"!=typeof window&&void 0!==window.localStorage,l.ShouldUseSocketIO=!0,l.dev=!1,l.secure=!l.dev,l.port=80,l.securePort=443,l.hostname="giggizmo.com",l._token=null,l._expires=null,l.useSocketIO=!1,l.webSocket=null,void 0!==l.Axios&&l.Axios&&(l.Axios.defaults.withCredentials=!0)},function(e,t,i){"use strict";i.r(t),i.d(t,"User",function(){return f});var s=i(2),r=i(8),n=i(12),a=i(5),o=i(6),d=i(14),l=i(15),c=i(1),u=i(7),g=i(4),h=i(10);class f extends c.a{get password(){return this.getField("password")}set password(e){this.setField("password",e)}get confirmPassword(){return this.getField("confirmPassword")}set confirmPassword(e){this.setField("confirmPassword",e)}get icon(){return this.getField("icon")}set icon(e){this.setField("icon",e)}set active(e){this.setField("active",e)}get active(){return this.getField("active")}set admin(e){this.setField("admin",e)}get admin(){return!0===this.getField("admin")}get firstName(){return this.getField("firstName")}set firstName(e){this.setField("firstName",e)}get middleName(){return this.getField("middleName")}set middleName(e){this.setField("middleName",e)}get lastName(){return this.getField("lastName")}set lastName(e){this.setField("lastName",e)}get birthday(){return new Date(this.getField("birthday"))}set birthday(e){this.setField("birthday",(e||new Date).toJSON())}get country(){return this.getField("country")}set country(e){this.setField("country",e)}get bandManager(){return!0===this.getField("bandManager")}set bandManager(e){this.setField("bandManager",e)}get venueManager(){return!0===this.getField("venueManager")}set venueManager(e){this.setField("venueManager",e)}get betaFeatureUser(){return!0===this.getField("betaFeatureUser")}set betaFeatureUser(e){this.setField("betaFeatureUser",e)}get sendAnonymousReports(){return!0===this.getField("sendAnonymousReports")}set sendAnonymousReports(e){this.setField("sendAnonymousReports",e)}get sendErrorReports(){return!0===this.getField("sendErrorReports")}set sendErrorReports(e){this.setField("sendErrorReports",e)}get sendEmails(){return!0===this.getField("sendEmails")}set sendEmails(e){this.setField("sendEmails",e)}get sendPromotions(){return!0===this.getField("sendPromotions")}set sendPromotions(e){this.setField("sendPromotions",e)}get useCookies(){return!0===this.getField("useCookies")}set useCookies(e){this.setField("useCookies",e)}get fullName(){return`${this.firstName||""} ${this.middleName||""} ${this.lastName||""}`}get email(){return this.getField("email")}set email(e){this.setField("email",e)}get salt(){return this.getField("salt")}get hash(){return this.getField("hash")}get facebook(){return this.getField("facebook")}set facebook(e){this.setField("facebook",e)}get twitter(){return this.getField("twitter")}set twitter(e){this.setField("twitter",e)}get description(){return this.getField("description")}set description(e){this.setField("description",e)}get emailVerified(){return this.getField("emailVerified")}set emailVerified(e){this.setField("emailVerified",e)}get attempts(){return this.getField("attempts")}get lastLoginIP(){return this.getField("lastLoginIP")}set lastLoginIP(e){this.setField("lastLoginIP",e)}get lastLogin(){return new Date(this.getField("lastLogin"))}set lastLogin(e){this.setField("lastLogin",(e||new Date).toJSON())}get canContact(){return!0===this.getField("canContact")}set canContact(e){this.setField("canContact",e)}get canFind(){return!0===this.getField("canFind")}set canFind(e){this.setField("canFind",e)}get options(){return this.getField("options")}set options(e){this.setField("options",e)}get connections(){return this.getField("connections")}set connections(e){this.setField("connections",e)}get blocked(){return this.getField("blocked")}set blocked(e){this.setField("blocked",e)}static verifyEmail(e,t){return s.a.call("GET","/API/User/Verify",{id:e,secret:t})}static sendEmailVerification(){return s.a.call("POST","/API/User/Verify",null)}static getAllConversations(){return c.a.findManyBase(n.Conversation,null,!0)}static getAllNotifications(){return c.a.findManyBase(d.Notification,null,!0)}static getAllPosts(){return c.a.findManyBase(l.Post,null,!0)}static getAllBands(){return c.a.findManyBase(r.Band,null,!0)}static getAllVenues(){return c.a.findManyBase(h.Venue,null,!0)}static getAllGigs(){return c.a.findManyBase(o.Gig,null,!0)}static getAllUploads(){return c.a.findManyBase(g.Upload,null,!0)}static findFacebookPages(e){return new Promise((t,i)=>{""===e?t():s.a.call("GET","/API/FacebookAccount/FindPages",{term:e}).then(t,i)})}static search(e,t=null,i=0,r=Number.POSITIVE_INFINITY){return new Promise((n,a)=>{if(""===e||void 0===e)n([]);else{const o={limit:void 0,model:void 0,q:void 0,skip:void 0};o.q=e,null!==t&&"null"!==t&&(o.model=t),0!==i&&Number.isFinite(Number(i))&&(o.skip=Number(i)),Number.isFinite(Number(r))&&(o.limit=Number(r));const d=e=>{const t=e.query;t||a(t),s.a.deserializeData(t).then(n,a)};s.a.useSocketIO&&s.a.ShouldUseSocketIO?s.a.getSocket().then(e=>{e&&e.emit("/API/TextSearch",o,d)},a):s.a.call("GET","/API/TextSearch",o).then(d,a)}})}static findMany(e){return c.a.findManyBase(f,e,!0)}static findOne(e){return c.a.findOneBase(f,e,!0)}static onChange(e){const t=Date.now();return f.Callbacks.set(t,e),()=>{f.Callbacks.delete(t)}}static async setUser(e){try{"object"==typeof e&&e?(f.Current=new f(e),s.a.SessionStorageSupported&&sessionStorage.setItem("user",JSON.stringify(e)),f.Callbacks.forEach(e=>e(f.Current))):(f.Current=null,s.a.token=null,s.a.expires=null,s.a.SessionStorageSupported&&sessionStorage.removeItem("user"),f.Callbacks.forEach(e=>e(null)))}catch(e){console.error(e)}return f.Current}static async getUser(e){let t=null;const i=new Date;if(!e&&s.a.expires&&i<s.a.expires){if(null!==f.Current)return f.Current;if(s.a.SessionStorageSupported){try{const e=sessionStorage.getItem("user")||"";t=JSON.parse(e)}catch(e){t=""}if(t)return f.setUser(t)}}return(t=s.a.useSocketIO&&s.a.ShouldUseSocketIO?await new Promise((e,t)=>{s.a.getSocket().then(t=>{t&&t.emit("/API/User/Retreive",e)},t)}):await s.a.call("GET","/API/User",null))?f.setUser(t):f.setUser(null)}static findById(e){return c.a.findByIdBase(f,e,!0)}static connectFacebook(){window.location.href=`${s.a.rootURL}/API/Auth/Facebook`}static facebookLogIn(){window.location.href=`${s.a.rootURL}/API/Login/Facebook`}static payPalLogIn(){window.location.href=`${s.a.rootURL}/API/Auth/PayPal`}static async userLogIn(e,t){if(e&&""!==e){if(t&&""!==t){let i=null;if((i=s.a.useSocketIO&&s.a.ShouldUseSocketIO?await new Promise((i,r)=>{s.a.getSocket().then(s=>{s&&s.emit("/API/User/SignIn",{email:e,password:t},i)},r)}):await s.a.call("POST","/API/User/SignIn",{email:e,password:t}))&&i.user&&i.token&&i.expires)return s.a.expires=new Date(i.expires),s.a.token=i.token,f.setUser(i.user);throw new Error("Unauthorized")}throw new Error("No password")}throw new Error("No email")}static async userLogOut(){s.a.useSocketIO&&s.a.ShouldUseSocketIO?await new Promise((e,t)=>{s.a.getSocket().then(t=>{t&&t.emit("/API/User/SignOut",null,e)},t)}):await s.a.call("POST","/API/User/SignOut",null);const e=await f.setUser(null);if(e&&e.isValid())throw new Error(`${JSON.stringify(e)} returned, failed to log out?`);return e}static sendPasswordResetEmail(e){return s.a.call("POST","/User/Reset",{email:e})}static registerUser(e){return new Promise((t,i)=>{if(!e||"object"!=typeof e)return i(new Error("User data is not an object"));if(!e.email)return i(new Error("Email is required"));if(0!==new RegExp(['^(([^<>()[].,;:s@"]+','(.[^<>()[].,;:s@"]+)*)|(".+"))','@(([^<>()[].,;:s@"]+.)+','[^<>()[].,;:s@"]{2,})$'].join(""),"i")[Symbol.search](e.email))return i(new Error("Invalid email address"));if(!e.password)return i(new Error("Password is required"));{const t=/[^a-zA-Z0-9]/gu,s=/[0-9]/g,r=e.password.toLowerCase();if(""===e.password)return i(new Error("Password is required"));if(e.password.length<8)return i(new Error("Password is too short"));if(e.password.length>256)return i(new Error("Password is too long"));if(!t.test(e.password))return i(new Error("Password does not contain at least one symbol"));if(!s.test(e.password))return i(new Error("Password does not contain at least one number"));if(e.firstName&&0!==e.firstName.length&&-1!==r.indexOf(e.firstName.toLowerCase()))return i(new Error("Password can not contain your first name"));if(e.lastName&&0!==e.lastName.length&&-1!==r.indexOf(e.lastName.toLowerCase()))return i(new Error("Password can not contain your last name"))}return e.firstName?0===e.firstName.length?i(new Error("First name is required")):e.firstName[0]===e.firstName[0].toLowerCase()?i(new Error("First name is not title case")):e.lastName?0===e.lastName.length?i(new Error("Last name is required")):e.lastName[0]===e.lastName[0].toLowerCase()?i(new Error("Last name is not title case")):s.a.useSocketIO&&s.a.ShouldUseSocketIO?new Promise((t,i)=>{s.a.getSocket().then(i=>{i&&i.emit("/API/User/Create",e,t)},i)}):s.a.call("POST","/API/User",e).then(e=>{e?f.setUser(e).then(e=>{t(e)},i):i(new Error(`${JSON.stringify(e)} returned`))},i):i(new Error("Last name is required")):i(new Error("First name is required"))})}static NotifyAdminsOfError(){console.error("Not implemented yet.")}getIcon(){return c.a.findByIdBase(g.Upload,this.icon||"",!0)}getTwitterAccount(){return c.a.findByIdBase(u.TwitterAccount,this.twitter||"")}getFacebookAccount(){return c.a.findByIdBase(a.FacebookAccount,this.facebook||"")}getConnections(){return Promise.all(this.connections.map(e=>f.findById(e)))}getBlocked(){return Promise.all(this.blocked.map(e=>f.findById(e)))}validatePassword(e){const t=e||"",i=t.toLowerCase(),s=this.firstName?this.firstName.toLowerCase():"",r=this.lastName?this.lastName.toLowerCase():"";return""===t?new Error("Password missing"):t.length<8?new Error("Password is too short"):t.length>256?new Error("Password is too long"):/\d/.test(t)?/\W/.test(t)?-1!==i.indexOf(s)?new Error("Password cannot contain your first name"):-1!==i.indexOf(r)?new Error("Password cannot contain your last name"):null:new Error("Password does not have atleast one symbol"):new Error("Password does not have atleast one number")}isValid(){return!!super.isValid()&&("string"==typeof this.firstName&&("string"==typeof this.lastName&&("string"==typeof this.email&&(""!==this.firstName&&(""!==this.lastName&&""!==this.email)))))}anyErrors(){const e=super.anyErrors();if(e)return e;if(this.id){if(!["string","undefined"].includes(typeof this.changes.firstName))return new Error(`Invalid firstName: ${this.changes.firstName}`);if(!["string","undefined"].includes(typeof this.changes.lastName))return new Error(`Invalid lastName: ${this.changes.lastName}`);if(!["string","undefined"].includes(typeof this.changes.password))return new Error(`Invalid password: ${this.changes.password}`);if(!["string","undefined"].includes(typeof this.changes.confirmPassword))return new Error(`Invalid confirmPassword: ${this.changes.confirmPassword}`);if(!["string","undefined"].includes(typeof this.changes.email))return new Error(`Invalid email: ${this.changes.email}`);if(""===this.changes.firstName)return new Error("Blank firstName");if(""===this.changes.lastName)return new Error("Blank lastName");if(this.changes.password){const e=this.validatePassword(this.changes.password);if(e)return e}if(this.changes.password!==this.changes.confirmPassword)return new Error("Passwords do not match")}else{if("string"!=typeof this.changes.firstName)return new Error(`Invalid firstName: ${this.changes.firstName}`);if("string"!=typeof this.changes.lastName)return new Error(`Invalid lastName: ${this.changes.lastName}`);if("string"!=typeof this.changes.password)return new Error(`Invalid password: ${this.changes.password}`);if("string"!=typeof this.changes.confirmPassword)return new Error(`Invalid confirmPassword: ${this.changes.confirmPassword}`);if(""===this.changes.firstName)return new Error("Blank firstName");if(""===this.changes.lastName)return new Error("Blank lastName");if(this.changes.password){const e=this.validatePassword(this.changes.password);if(e)return e}if(this.changes.password!==this.changes.confirmPassword)return new Error("Passwords do not match")}return null}save(){return super.save(!0)}remove(){return super.remove(!0)}}f.ModelName="User",f.Current=null,f.Callbacks=new Map,f.agreement=null,f.EmailRegex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},function(e,t,i){"use strict";i.r(t),i.d(t,"Upload",function(){return n});var s=i(1),r=i(3);class n extends s.a{get fileData(){return this.getField("fileData")}set fileData(e){this.setField("fileData",e)}get description(){return this.getField("description")}set description(e){this.setField("description",e)}get owners(){return this.getField("owners")}set owners(e){this.setField("owners",e)}get hash(){return this.getField("hash")}set hash(e){this.setField("hash",e)}get bytes(){return this.getField("bytes")}set bytes(e){this.setField("bytes",e)}get width(){return this.getField("width")}set width(e){this.setField("width",e)}get height(){return this.getField("height")}set height(e){this.setField("height",e)}get offsetWidth(){return this.getField("offsetWidth")}set offsetWidth(e){this.setField("offsetWidth",e)}get offsetHeight(){return this.getField("offsetHeight")}set offsetHeight(e){this.setField("offsetHeight",e)}get offsetLeft(){return this.getField("offsetLeft")}set offsetLeft(e){this.setField("offsetLeft",e)}get offsetTop(){return this.getField("offsetTop")}set offsetTop(e){this.setField("offsetTop",e)}static async uploadFile(e){let t=new n({fileData:e});return t=await t.save(!0)}static findById(e){return s.a.findByIdBase(n,e)}static findMany(e){return s.a.findManyBase(n,e,!0)}static findOne(e){return s.a.findOneBase(n,e)}static getAllOwned(){return s.a.findManyBase(n,null,!0)}getOwners(){const e=Array.from(this.owners);return 0!==e.length?s.a.findManyBase(r.User,{_id:e},!0):Promise.resolve([])}userIsOwner(e){if(Array.isArray(this.owners)){let t;return"string"==typeof e?t=e:"object"==typeof e&&e&&(t=e._id),void 0!==this.owners.find(e=>e===t)}return!1}anyErrors(){const e=super.anyErrors();return e||(this.description?this.fileData?this.width?this.height?this.offsetWidth?this.offsetHeight?"number"!=typeof this.offsetLeft||this.offsetLeft<0?new Error(`Invalid offsetLeft: ${this.offsetLeft}`):"number"!=typeof this.offsetTop||this.offsetTop<0?new Error(`Invalid offsetTop: ${this.offsetTop}`):this.document.hash?this.document.bytes?Array.isArray(this.document.owners)&&0!==this.document.owners.length?null:new Error(`Invalid owners: ${this.document.owners}`):new Error(`Invalid bytes: ${this.document.bytes}`):new Error(`Invalid hash: ${this.document.hash}`):new Error(`Invalid offsetHeight: ${this.offsetHeight}`):new Error(`Invalid offsetWidth: ${this.offsetWidth}`):new Error(`Invalid height: ${this.height}`):new Error(`Invalid width: ${this.width}`):new Error(`Invalid fileData: ${this.fileData}`):new Error(`Invalid description: ${this.description}`))}}n.ModelName="Upload"},function(e,t,i){"use strict";i.r(t),i.d(t,"FacebookAccount",function(){return a});var s=i(2),r=i(1),n=i(3);class a extends r.a{get userId(){return this.getField("userId")}set userId(e){this.setField("userId",e)}get accountId(){return this.getField("accountId")}set accountId(e){this.setField("accountId",e)}get userAccessToken(){return this.getField("userAccessToken")}set userAccessToken(e){this.setField("userAccessToken",e)}get userRefreshToken(){return this.getField("userRefreshToken")}set userRefreshToken(e){this.setField("userRefreshToken",e)}get profile(){return this.getField("profile")}static findOne(e){return r.a.findOneBase(a,e,!0)}static findMany(e){return r.a.findManyBase(a,e,!0)}static findById(e){return new Promise((t,i)=>{"string"==typeof e&&""!==e?s.a.call("GET",`/API/FacebookAccount/${e}`,null).then(e=>{const s=e||null;s?t(new a(s)):i(new Error(`${s} returned`))},i):t()})}static findPage(e){return new Promise((t,i)=>{"string"!=typeof e?i(new Error("pageName is not a string!")):s.a.call("GET","/API/Facebook/Page/Find",{name:e}).then(t,i)})}static PostToPage(e,t,i,r){return new Promise((n,a)=>{s.a.call("POST","/API/Facebook/Page/Post",{fb_page_id:i,post_format:e,post_text:t,publish_time:r}).then(n,a)})}getUser(){return r.a.findByIdBase(n.User,this.userId,!0)}userIsOwner(e){return"string"==typeof e?e===this.userId:!("object"!=typeof e||!e)&&e._id===this.userId}isValid(){return!!super.isValid()&&(!(!this.userId||"string"!=typeof this.userId)&&(!(!this.profile||"object"!=typeof this.profile)&&!(!this.accountId||"string"!=typeof this.accountId)))}}a.ModelName="FacebookAccount"},function(e,t,i){"use strict";i.r(t),i.d(t,"Gig",function(){return d});var s=i(2),r=i(8),n=i(9),a=i(1),o=i(10);class d extends a.a{get startTime(){return new Date(this.getField("startTime"))}set startTime(e){this.setField("startTime",e)}get stopTime(){return new Date(this.getField("stopTime"))}set stopTime(e){this.setField("stopTime",e.toJSON())}get location(){return this.getField("location")}set location(e){this.setField("location",e)}get venue(){return this.getField("venue")}set venue(e){this.setField("venue",e)}get bands(){return this.getField("bands")}set bands(e){this.setField("bands",e)}get active(){return this.getField("active")}get toBeAnnounced(){return this.getField("toBeAnnounced")}set toBeAnnounced(e){this.setField("toBeAnnounced",e)}get bandOwnersAccepted(){return this.getField("bandOwnersAccepted")}set bandOwnersAccepted(e){this.setField("bandOwnersAccepted",e)}get venueOwnerAccepted(){return this.getField("venueOwnerAccepted")}set venueOwnerAccepted(e){this.setField("venueOwnerAccepted",e)}get owners(){return this.getField("owners")}set owners(e){this.setField("owners",e)}static findById(e){return a.a.findByIdBase(d,e,!0)}static async findByBand(e){const t=await s.a.call("GET",`/API/Band/${e}/Gigs`,null);if(t&&Array.isArray(t))return t.map(e=>{const t=new d(e);return a.a.CacheSet(t),t});throw new Error(`Expected Array, got ${t}`)}static async findByVenue(e){const t=await s.a.call("GET",`/API/Venue/${e}/Gigs`,null);if(t&&Array.isArray(t))return t.map(e=>{const t=new d(e);return a.a.CacheSet(t),t});throw new Error(`Expected Array, got ${t}`)}static getAllOwned(){return a.a.findManyBase(d,null,!0)}static findMany(e){return a.a.findManyBase(d,e,!0)}static createGigs(e){return new Promise((t,i)=>{const r=e||{};if(r&&"object"==typeof r){if(!r.band||""===r.band)return i(new Error("Band is required"));if(!r.venue||""===r.venue)return i(new Error("Venue is required"));if(!r.times||0===r.times.length)return i(new Error("Times is required"));const e=r.times.filter((e,t)=>{if(e.dayDate&&e.startTime&&e.stopTime){const i=new Date(e.dayDate),s=new Date(e.startTime);s.setFullYear(i.getFullYear()),s.setMonth(i.getMonth()),s.setDate(i.getDay());const n=new Date(e.stopTime);return n.setFullYear(i.getFullYear()),n.setMonth(i.getMonth()),n.setDate(i.getDay()),r.times[t]={startTime:e.startTime,stopTime:e.stopTime},!0}return!(!e.startTime||!e.stopTime)&&(r.times[t]={startTime:e.startTime,stopTime:e.stopTime},!0)});return e.length!==r.times.length?i(new Error("Not all times were valid")):(r.times=e,s.a.call("POST","/API/Gig",r).then(e=>{let i=[];i=Array.from(e||[]).map(e=>{return new d(e)}),t(i)},i))}return null})}static getAllInDistance(e,t){return new Promise((i,r)=>"object"!=typeof e?r(new Error("location is not a object!")):"number"!=typeof e.lat||"number"!=typeof e.lng?r(new Error("location does not contain lat or lng!")):"number"!=typeof t?r(new Error("radius is not a number!")):s.a.call("GET","/API/Gig/InDistance",{dis:t,lat:e.lat,lng:e.lng}).then(e=>{i(Array.from(e).map(e=>{return new d(e)}))},r))}getBands(){return a.a.findManyBase(r.Band,{_id:this.bands},!0)}getVenue(){return a.a.findByIdBase(o.Venue,this.venue,!0)}getLocation(){return a.a.findByIdBase(n.Location,this.location,!0)}isValid(){return!!super.isValid()&&(!!Array.isArray(this.owners)&&0!==this.owners.length)}userIsOwner(e){if(Array.isArray(this.owners)){let t;return"string"==typeof e?t=e:"object"==typeof e&&e&&(t=e._id),void 0!==this.owners.find(e=>e===t)}return!1}}d.ModelName="Gig"},function(e,t,i){"use strict";i.r(t),i.d(t,"TwitterAccount",function(){return a});var s=i(2),r=i(1),n=i(3);class a extends r.a{get userId(){return this.getField("userId")}set userId(e){this.setField("userId",e)}get accessToken(){return this.getField("accessToken")}set accessToken(e){this.setField("accessToken",e)}get tokenSecret(){return this.getField("tokenSecret")}set tokenSecret(e){this.setField("tokenSecret",e)}get profile(){return this.getField("profile")}set profile(e){this.setField("profile",e)}get accountId(){return this.getField("accountId")}set accountId(e){this.setField("accountId",e)}static findOne(e){return r.a.findOneBase(a,e,!0)}static findMany(e){return r.a.findManyBase(a,e,!0)}static findById(e){return new Promise((t,i)=>{"string"==typeof e&&""!==e?s.a.call("GET",`/API/TwitterAccount/${e}`,null).then(e=>{const s=e||null;s?t(new a(s)):i(new Error(`${s} returned`))},i):t()})}getUser(){return r.a.findByIdBase(n.User,this.userId,!0)}userIsOwner(e){return"string"==typeof e?e===this.userId:"function"==typeof e&&e._id===this.userId}goToTwitterAccount(){"undefined"!=typeof window&&(window.location.href=`https://twitter.com?profile_id=${this.accountId}`)}isValid(){return!!super.isValid()&&(!(!this.userId||"string"!=typeof this.userId)&&!(!this.profile||"object"!=typeof this.profile))}}a.ModelName="TwitterAccount"},function(e,t,i){"use strict";i.r(t),i.d(t,"Band",function(){return l});var s=i(5),r=i(6),n=i(1),a=i(7),o=i(4),d=i(3);class l extends n.a{get name(){return this.getField("name")}set name(e){this.setField("name",e)}get website(){return this.getField("website")}set website(e){this.setField("website",e)}get email(){return this.getField("email")}set email(e){this.setField("email",e)}get cityName(){return this.getField("cityName")}set cityName(e){this.setField("cityName",e)}get cityPlaceID(){return this.getField("cityPlaceID")}set cityPlaceID(e){this.setField("cityPlaceID",e)}get description(){return this.getField("description")}set description(e){this.setField("description",e)}get metadata(){return this.getField("metadata")}set metadata(e){this.setField("metadata",e)}get icon(){return this.getField("icon")}set icon(e){this.setField("icon",e)}get photos(){return this.getField("photos")}set photos(e){this.setField("photos",e)}get owners(){return this.getField("owners")}set owners(e){this.setField("owners",e)}get facebook(){return this.getField("facebook")}set facebook(e){this.setField("facebook",e)}get facebookPageId(){return this.getField("facebookPageId")}set facebookPageId(e){this.setField("facebookPageId",e)}get facebookPageName(){return this.getField("facebookPageName")}set facebookPageName(e){this.setField("facebookPageName",e)}get facebookPageToken(){return this.getField("facebookPageToken")}set facebookPageToken(e){this.setField("facebookPageToken",e)}get twitter(){return this.getField("twitter")}set twitter(e){this.setField("twitter",e)}get google(){return this.getField("google")}set google(e){this.setField("google",e)}static findOne(e){return n.a.findOneBase(l,e,!0)}static findMany(e){return n.a.findManyBase(l,e,!0)}static findById(e){return n.a.findByIdBase(l,e,!0)}static getAllOwned(){return n.a.findManyBase(l,null,!0)}save(){return super.save(!0)}remove(){return super.remove(!0)}getIcon(){return this.icon?n.a.findByIdBase(o.Upload,this.icon,!0):Promise.resolve(null)}getPhotos(){const e=Array.from(this.photos);return 0!==e.length?n.a.findManyBase(o.Upload,{_id:e},!0):Promise.resolve([])}getOwners(){const e=Array.from(this.owners);return 0!==e.length?n.a.findManyBase(d.User,{_id:e},!0):Promise.resolve([])}getGigs(){return r.Gig.findByBand(this._id||"")}getTwitterAccount(){return this.twitter?n.a.findByIdBase(a.TwitterAccount,this.twitter,!0):Promise.resolve(null)}getFacebookAccount(){return this.facebook?n.a.findByIdBase(s.FacebookAccount,this.facebook,!0):Promise.resolve(null)}isValid(){const e=this;return!!super.isValid()&&("string"==typeof this.cityPlaceID&&(""!==this.cityPlaceID&&("string"==typeof this.name&&(""!==this.name&&("string"==typeof this.description&&(""!==this.description&&("<p><br></p>"!==this.description&&(!!Array.isArray(this.owners)&&(0!==this.owners.length&&!!this.owners.every(t=>e.userIsOwner(t)))))))))))}userIsOwner(e){if(Array.isArray(this.owners)){let t;return"string"==typeof e?t=e:"object"==typeof e&&e&&(t=e._id),void 0!==this.owners.find(e=>e===t)}return!1}}l.ModelName="Band"},function(e,t,i){"use strict";i.r(t),i.d(t,"Location",function(){return a});var s=i(2),r=i(13),n=i(1);class a extends n.a{get type(){return this.getField("type")||"Point"}set type(e){this.setField("type",e)}get placeId(){return this.getField("placeId")}set placeId(e){this.setField("placeId",e)}get address(){return this.getField("address")}set address(e){this.setField("address",e)}get point(){return this.getField("point")}set point(e){this.setField("point",e)}get utcOffset(){return this.getField("utcOffset")}set utcOffset(e){this.setField("utcOffset",e)}static getLocationByPlaceId(e){return new Promise((t,i)=>{e?s.a.call("GET",`/API/Place/${e}`,null).then(e=>{e?t(new a(e)):i(new Error(`${e} returned`))},i):i(new Error(`Invaild placeId: ${e}`))})}static findById(e){return n.a.findByIdBase(a,e)}static findOne(e){return n.a.findOneBase(a,e)}static findMany(e){return n.a.findManyBase(a,e,!1)}isValid(){return!!super.isValid()&&(!!this.placeId&&(!!this.address&&(!!this.utcOffset&&!!Array.isArray(this.point))))}getPlaceDetails(){return r.GooglePlace.getPlaceDetails(this.placeId)}}a.ModelName="Location"},function(e,t,i){"use strict";i.r(t),i.d(t,"Venue",function(){return c});var s=i(5),r=i(6),n=i(9),a=i(1),o=i(7),d=i(4),l=i(3);class c extends a.a{get name(){return this.getField("name")}set name(e){this.setField("name",e)}get description(){return this.getField("description")}set description(e){this.setField("description",e)}get email(){return this.getField("email")}set email(e){this.setField("email",e)}get website(){return this.getField("website")}set website(e){this.setField("website",e)}get phone(){return this.getField("phone")}set phone(e){this.setField("phone",e)}get location(){return this.getField("location")}set location(e){this.setField("location",e)}get openCloseTimes(){return this.getField("openCloseTimes")}set openCloseTimes(e){this.setField("openCloseTimes",e)}get icon(){return this.getField("icon")}set icon(e){this.setField("icon",e)}get photos(){return this.getField("photos")}set photos(e){this.setField("photos",e)}get owners(){return this.getField("owners")}set owners(e){this.setField("owners",e)}get facebook(){return this.getField("facebook")}set facebook(e){this.setField("facebook",e)}get facebookPageId(){return this.getField("facebookPageId")}set facebookPageId(e){this.setField("facebookPageId",e)}get facebookPageName(){return this.getField("facebookPageName")}set facebookPageName(e){this.setField("facebookPageName",e)}get facebookPageToken(){return this.getField("facebookPageToken")}set facebookPageToken(e){this.setField("facebookPageToken",e)}get twitter(){return this.getField("twitter")}set twitter(e){this.setField("twitter",e)}get google(){return this.getField("google")}set google(e){this.setField("google",e)}static findOne(e){return a.a.findOneBase(c,e,!0)}static findMany(e){return a.a.findManyBase(c,e,!0)}static findById(e){return a.a.findByIdBase(c,e,!0)}static getAllOwned(){return a.a.findManyBase(c,null,!0)}save(){return super.save(!0)}remove(){return super.remove(!0)}getIcon(){return a.a.findByIdBase(d.Upload,this.icon||"",!0)}getPhotos(){const e=Array.from(this.photos);return 0!==e.length?a.a.findManyBase(d.Upload,{_id:e},!0):Promise.resolve([])}getOwners(){const e=Array.from(this.owners);return 0!==e.length?a.a.findManyBase(l.User,{_id:e},!0):Promise.resolve([])}getGigs(){return r.Gig.findByVenue(this._id||"")}getTwitterAccount(){return a.a.findByIdBase(o.TwitterAccount,this.twitter||"",!0)}getFacebookAccount(){return a.a.findByIdBase(s.FacebookAccount,this.facebook||"",!0)}getLocation(){return a.a.findByIdBase(n.Location,this.location||"",!0)}isValid(){const e=this;return!!super.isValid()&&(!!a.a.isValidId(this.location)&&(""!==this.location&&("string"==typeof this.name&&(""!==this.name&&("string"==typeof this.description&&(""!==this.description&&("<p><br></p>"!==this.description&&(!!Array.isArray(this.owners)&&(0!==this.owners.length&&!!this.owners.every(t=>e.userIsOwner(t)))))))))))}userIsOwner(e){if(Array.isArray(this.owners)){let t;return"string"==typeof e?t=e:"object"==typeof e&&e&&(t=e._id),void 0!==this.owners.find(e=>e===t)}return!1}}c.ModelName="Venue"},function(e,t,i){"use strict";async function s(e){switch(e){case"Band":return(await Promise.resolve().then(i.bind(null,8))).Band;case"Conversation":return(await Promise.resolve().then(i.bind(null,12))).Conversation;case"ErrorReport":return(await Promise.resolve().then(i.bind(null,16))).ErrorReport;case"FacebookAccount":return(await Promise.resolve().then(i.bind(null,5))).FacebookAccount;case"Gig":return(await Promise.resolve().then(i.bind(null,6))).Gig;case"GooglePlace":return(await Promise.resolve().then(i.bind(null,13))).GooglePlace;case"Location":return(await Promise.resolve().then(i.bind(null,9))).Location;case"Notification":return(await Promise.resolve().then(i.bind(null,14))).Notification;case"Page":return(await Promise.resolve().then(i.bind(null,17))).Page;case"Post":return(await Promise.resolve().then(i.bind(null,15))).Post;case"Request":return(await Promise.resolve().then(i.bind(null,18))).Request;case"TwitterAccount":return(await Promise.resolve().then(i.bind(null,7))).TwitterAccount;case"Upload":return(await Promise.resolve().then(i.bind(null,4))).Upload;case"User":return(await Promise.resolve().then(i.bind(null,3))).User;case"Venue":return(await Promise.resolve().then(i.bind(null,10))).Venue;default:return Promise.resolve(null)}}i.d(t,"a",function(){return s})},function(e,t,i){"use strict";i.r(t),i.d(t,"Conversation",function(){return n});var s=i(2),r=i(1);class n extends r.a{get events(){return this.getField("events")||[]}set events(e){this.setField("events",e)}get users(){return this.getField("users")||[]}set users(e){this.setField("users",e)}static newCallback(e){const t=Date.now();return n.Callbacks.set(t,e),()=>n.Callbacks.delete(t)}static connectSocket(){s.a.getSocket().then(e=>{e&&e.on("/API/Conversation/Update",e=>{if(e){let t=r.a.CacheGet(e._id);t?Object.assign(t,e):t=new n(e),r.a.CacheSet(t),n.Callbacks.forEach(e=>e(t))}})},console.error)}static findById(e){return r.a.findByIdBase(n,e,!0)}static findOne(e){return r.a.findOneBase(n,e)}static findMany(e){return r.a.findManyBase(n,e,!1)}static getAllOwned(){return r.a.findManyBase(n,null,!0)}isValid(){return!!super.isValid()}pushMessage(e,t){return this.events.push({dateTimePosted:new Date,message:t,user:e}),this.save()}}n.ModelName="Conversation",n.Callbacks=new Map},function(e,t,i){"use strict";i.r(t),i.d(t,"GooglePlace",function(){return n});var s=i(2),r=i(1);class n extends r.a{get placeId(){return this.getField("placeId")||this.getField("place_id")}set placeId(e){this.setField("placeId",e)}get details(){return this.getField("details")}set details(e){this.setField("details",e)}get description(){return this.getField("description")}set description(e){this.setField("description",e)}static findById(e){return r.a.findByIdBase(n,e)}static findOne(e){return r.a.findOneBase(n,e)}static findMany(e){return r.a.findManyBase(n,e,!1)}static getPlaceDetails(e){return new Promise((t,i)=>"string"!=typeof e?i(new Error("placeId is not a string!")):s.a.call("GET","/API/GooglePlace",{placeId:e}).then(t,i))}static queryPlace(e,t){return new Promise((i,r)=>{const n=t||"locality";return"string"!=typeof e?r(new Error("text is not a string!")):0===e.length?r(new Error("text is blank")):s.a.call("GET","/API/GooglePlace/Query",{term:e,type:n}).then(i,r)})}}n.ModelName="GooglePlace"},function(e,t,i){"use strict";i.r(t),i.d(t,"Notification",function(){return n});var s=i(2),r=i(1);class n extends r.a{constructor(){super(...arguments),this.changeCallbacks=new Map}get userId(){return this.getField("userId")}set userId(e){this.setField("userId",e)}get label(){return this.getField("label")}set label(e){this.setField("label",e)}get message(){return this.getField("message")}set message(e){this.setField("message",e)}get actions(){return this.getField("actions")}set actions(e){this.setField("actions",e)}get seenByUser(){return this.getField("seenByUser")}set seenByUser(e){this.setField("seenByUser",e)}static onNewNotification(e){n.Callbacks.forEach(t=>t(e))}static newCallback(e){const t=Date.now();return n.Callbacks.set(t,e),()=>n.Callbacks.delete(t)}static async getNewNotifications(){if(null!==s.a.token){const e=await s.a.call("GET","/API/Notification",{returnNew:!0});if(Array.isArray(e))return e.map(e=>new n(e))}return[]}static getAllOwned(){return r.a.findManyBase("Notification",null,!0)}static findById(e){return r.a.findByIdBase("Notification",e,!0)}static connectSocket(){s.a.getSocket().then(e=>{e&&e.on("notification",e=>n.onNewNotification(new n(e)))},console.error)}static setUpPushNotifications(){const e="undefined"!=typeof window&&void 0!==window.Notification,t=e?window.Notification:null;if(e){const e=e=>{"granted"===e&&n.onNewNotification(e=>new t(e.label,{body:e.message,data:e,icon:"/LogoSmall.png",timestamp:e.dateCreated}))};"granted"===t.permission?e(t.permission):t.requestPermission(e)}}newChangeCallback(e){const t=Date.now();return this.changeCallbacks.set(t,e),()=>{this.changeCallbacks.delete(t)}}}n.ModelName="Notification",n.Callbacks=new Map},function(e,t,i){"use strict";i.r(t),i.d(t,"Post",function(){return r});var s=i(1);class r extends s.a{get userId(){return this.getField("userId")}set userId(e){this.setField("userId",e)}get network(){return this.getField("network")}set network(e){this.setField("network",e)}get accountId(){return this.getField("accountId")}set accountId(e){this.setField("accountId",e)}get pageId(){return this.getField("pageId")}set pageId(e){this.setField("pageId",e)}get postText(){return this.getField("postText")}set postText(e){this.setField("postText",e)}get postDate(){return this.getField("postDate")}set postDate(e){this.setField("postDate",e)}get coordinates(){return this.getField("coordinates")}set coordinates(e){this.setField("coordinates",e)}get error(){return this.getField("error")}set error(e){this.setField("error",e)}get done(){return this.getField("done")}set done(e){this.setField("done",e)}static findById(e){return s.a.findByIdBase(r,e)}static findOne(e){return s.a.findOneBase(r,e)}static getAllOwned(){return s.a.findManyBase(r,null)}static findMany(e){return s.a.findManyBase(r,e)}isValid(){return!!super.isValid()}canSave(){return!!this.postDate&&(!(!this.postText||""===this.postText)&&!!this.network)}userIsOwner(e){return"string"==typeof e?e===this.userId:!("function"!=typeof e||!e||!e.isValid())&&e._id===this.userId}}r.ModelName="Post"},function(e,t,i){"use strict";i.r(t),i.d(t,"ErrorReport",function(){return r});var s=i(1);class r extends s.a{get version(){return this.getField("version")}set version(e){this.setField("version",e)}get userId(){return this.getField("userId")}set userId(e){this.setField("userId",e)}get stack(){return this.getField("stack")}set stack(e){this.setField("stack",e)}get message(){return this.getField("message")}set message(e){this.setField("message",e)}get name(){return this.getField("name")}set name(e){this.setField("name",e)}get fileName(){return this.getField("fileName")}set fileName(e){this.setField("fileName",e)}get columnNumber(){return this.getField("columnNumber")}set columnNumber(e){this.setField("columnNumber",e)}get lineNumber(){return this.getField("lineNumber")}set lineNumber(e){this.setField("lineNumber",e)}static findById(e){return s.a.findByIdBase(r,e)}static findOne(e){return s.a.findOneBase(r,e)}static findMany(e){return s.a.findManyBase(r,e)}isValid(){return!!super.isValid()}}r.ModelName="ErrorReport"},function(e,t,i){"use strict";i.r(t),i.d(t,"Page",function(){return n});var s=i(2),r=i(1);class n extends r.a{get data(){return this.getField("data")}set data(e){this.setField("data",e)}get metadata(){return this.getField("metadata")}set metadata(e){this.setField("metadata",e)}get title(){return this.getField("title")}set title(e){this.setField("title",e)}get link(){return this.getField("link")}set link(e){this.setField("link",e)}get visits(){return this.getField("visits")||0}set visits(e){this.setField("visits",e)}get revisions(){return this.getField("revisions")||0}set revisions(e){this.setField("revisions",e)}get hide(){const e=this.getField("hide");return null===e||Boolean(e)}set hide(e){this.setField("hide",e)}get blog(){const e=this.getField("blog");return Boolean(e)}set blog(e){this.setField("blog",e)}get doc(){const e=this.getField("doc");return Boolean(e)}set doc(e){this.setField("doc",e)}get admin(){return this.getField("admin")}set admin(e){this.setField("admin",e)}static findMany(e,t,i){return e&&(e.skip=e.skip||t,e.limit=e.limit||i),r.a.findManyBase(n,e)}static findOne(e){return r.a.findOneBase(n,e)}static findById(e){return r.a.findByIdBase(n,e)}static findByLink(e){return new Promise((t,i)=>{s.a.call("GET",`/API/Link/${e}`,null).then(e=>{t(new n(e))},i)})}isValid(){return!!super.isValid()&&(!!this.title&&""!==this.title)}userIsOwner(e){return"string"==typeof e?e===this.admin:!("function"!=typeof e||!e||!e.isValid())&&(e._id===this.admin||e.admin)}}n.ModelName="Page"},function(e,t,i){"use strict";i.r(t),i.d(t,"Request",function(){return n});var s=i(2),r=i(1);class n extends r.a{get to(){return this.getField("to")}set to(e){this.setField("to",e)}get from(){return this.getField("from")}set from(e){this.setField("from",e)}get status(){return this.getField("status")}set status(e){this.setField("status",e)}get options(){return this.getField("options")}set options(e){this.setField("options",e)}get type(){return this.getField("type")}set type(e){this.setField("type",e)}get userData(){return this.getField("userData")}set userData(e){this.setField("userData",e)}get emailSent(){return this.getField("emailSent")}set emailSent(e){this.setField("emailSent",e)}static createBandOwnershipRequest(e,t,i){return new Promise((r,a)=>{s.a.call("POST","/API/Request",{from:t,to:i,type:"BandOwnership",userData:{bandId:e}}).then(e=>{r(new n(e))},a)})}static createVenueOwnershipRequest(e,t,i){return new Promise((r,a)=>{s.a.call("POST","/API/Request",{from:t,to:i,type:"VenueOwnership",userData:{venueId:e}}).then(e=>{r(new n(e))},a)})}static createGigNegotiation(e,t,i){return new Promise((r,a)=>{s.a.call("POST","/API/Request",{from:t,to:i,type:"GigNegotiation",userData:{gigId:e}}).then(e=>{r(new n(e))},a)})}static getAllOwned(){return r.a.findManyBase(n,null)}static findById(e){return r.a.findByIdBase(n,e)}async execute(e){const t=await s.a.call("POST",`/API/Request/${this._id}/${e}`,null);return this.assign(t),this}}n.ModelName="Request"},function(e,t,i){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},r=t||{},a=e.split(n),d=r.decode||s,l=0;l<a.length;l++){var c=a[l],u=c.indexOf("=");if(!(u<0)){var g=c.substr(0,u).trim(),h=c.substr(++u,c.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),null==i[g]&&(i[g]=o(h,d))}}return i},t.serialize=function(e,t,i){var s=i||{},n=s.encode||r;if("function"!=typeof n)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");var o=n(t);if(o&&!a.test(o))throw new TypeError("argument val is invalid");var d=e+"="+o;if(null!=s.maxAge){var l=s.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");d+="; Max-Age="+Math.floor(l)}if(s.domain){if(!a.test(s.domain))throw new TypeError("option domain is invalid");d+="; Domain="+s.domain}if(s.path){if(!a.test(s.path))throw new TypeError("option path is invalid");d+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw new TypeError("option expires is invalid");d+="; Expires="+s.expires.toUTCString()}s.httpOnly&&(d+="; HttpOnly");s.secure&&(d+="; Secure");if(s.sameSite){var c="string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite;switch(c){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return d};var s=decodeURIComponent,r=encodeURIComponent,n=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,t){try{return t(e)}catch(t){return e}}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return s});i(22),i(23),i(24),i(25),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(33),i(34);const s=e.exports}).call(this,i(20)(e))},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,cityName:s.string,cityPlaceID:s.string,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,description:s.string,email:s.string,facebook:s.string,facebookPageId:s.string,facebookPageName:s.string,facebookPageToken:s.string,google:s.string,icon:s.string,metadata:s.string,name:s.string.isRequired,owners:s.arrayOf(s.string),photos:s.arrayOf(s.string),twitter:s.string,website:s.string})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,events:s.arrayOf(s.shape({dateTimePosted:s.string.isRequired,message:s.string.isRequired,user:s.string.isRequired})),users:s.arrayOf(s.string.isRequired)})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,columnNumber:s.number,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,fileName:s.string,lineNumber:s.number,message:s.string.isRequired,name:s.string.isRequired,stack:s.string.isRequired,userId:s.string.isRequired,version:s.string.isRequired})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,accountId:s.string.isRequired,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,profile:s.any,userAccessToken:s.string,userId:s.string.isRequired,userRefreshToken:s.string})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,bandOwnerAccepted:s.string,bands:s.arrayOf(s.string).isRequired,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,location:s.string.isRequired,owners:s.arrayOf(s.string),startTime:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,stopTime:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,toBeAnnounced:s.bool,venue:s.string.isRequired,venueOwnerAccepted:s.string})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,address:s.string.isRequired,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,placeId:s.string.isRequired,point:s.arrayOf(s.number).isRequired,type:s.string.isRequired,utcOffset:s.number.isRequired})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,actions:s.arrayOf(s.shape({label:s.string.isRequired,link:s.string,request:s.string})),dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,label:s.string.isRequired,message:s.string.isRequired,seenByUser:s.bool,userId:s.string.isRequired})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,blog:s.bool,data:s.string,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,doc:s.bool,hide:s.bool,link:s.string,metadata:s.string,revisions:s.number,title:s.string,visits:s.number})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,accountId:s.string.isRequired,coordinates:s.arrayOf(s.number),dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,done:s.bool.isRequired,error:s.any,network:s.string.isRequired,pageId:s.string.isRequired,postDate:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,postText:s.string.isRequired,userId:s.string.isRequired})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,accessToken:s.string,accountId:s.string.isRequired,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,profile:s.any,tokenSecret:s.string,userId:s.string.isRequired})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,description:s.string,fileData:s.string.isRequired,fileName:s.string.isRequired,owners:s.arrayOf(s.string).isRequired,title:s.string.isRequired})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,active:s.bool,admin:s.bool,attempts:s.number,bandManager:s.bool,betaFeatureUser:s.bool,birthday:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,country:s.string.isRequired,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,description:s.string,email:s.string,emailVerified:s.bool,facebook:s.string,firstName:s.string.isRequired,icon:s.string,lastLogin:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,lastLoginIP:s.string.isRequired,lastName:s.string.isRequired,middleName:s.string,payment:s.string,paypal:s.string,sendAnonymousReports:s.bool,sendEmails:s.bool,sendErrorReports:s.bool,sendPromotions:s.bool,twitter:s.string,useCookies:s.bool,venueManager:s.bool})},function(e,t,i){"use strict";var s=i(0);s.shape({_id:s.string.isRequired,dateCreated:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,dateModified:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired,description:s.string.isRequired,email:s.string,facebook:s.string,facebookPageId:s.string,facebookPageName:s.string,facebookPageToken:s.string,google:s.string,icon:s.string,location:s.string.isRequired,metaData:s.string,name:s.string.isRequired,openCloseTimes:s.arrayOf(s.shape({closingTime:s.string,open:s.bool,openingTime:s.string})),owners:s.arrayOf(s.string),phone:s.string,photos:s.arrayOf(s.string),twitter:s.string,website:s.string})},function(e,t){!function(){e.exports=this.axios}()},function(e,t){!function(){e.exports=this["socket.io-client"]}()},function(e,t,i){"use strict";i.r(t),function(e){var s=i(21);i.d(t,"GigGizmoPropTypes",function(){return s.a});var r=i(2);i.d(t,"API",function(){return r.a});var n=i(8);i.d(t,"Band",function(){return n.Band});var a=i(12);i.d(t,"Conversation",function(){return a.Conversation});var o=i(16);i.d(t,"ErrorReport",function(){return o.ErrorReport});var d=i(5);i.d(t,"FacebookAccount",function(){return d.FacebookAccount});var l=i(6);i.d(t,"Gig",function(){return l.Gig});var c=i(13);i.d(t,"GooglePlace",function(){return c.GooglePlace});var u=i(9);i.d(t,"Location",function(){return u.Location});var g=i(14);i.d(t,"Notification",function(){return g.Notification});var h=i(17);i.d(t,"Page",function(){return h.Page});var f=i(15);i.d(t,"Post",function(){return f.Post});var m=i(18);i.d(t,"Request",function(){return m.Request});var p=i(1);i.d(t,"RESTModel",function(){return p.a});var w=i(7);i.d(t,"TwitterAccount",function(){return w.TwitterAccount});var y=i(4);i.d(t,"Upload",function(){return y.Upload});var F=i(3);i.d(t,"User",function(){return F.User});var b=i(10);i.d(t,"Venue",function(){return b.Venue});var I=i(11);i.d(t,"ModelNameToModel",function(){return I.a}),"undefined"!=typeof window&&(window.GigGizmoAPI=e.exports)}.call(this,i(20)(e))},function(e,t,i){"use strict";var s=i(39);function r(){}function n(){}n.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,n,a){if(a!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:r};return i.PropTypes=i,i}},function(e,t,i){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}]));
//# sourceMappingURL=index.js.map